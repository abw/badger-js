<!DOCTYPE html><html><head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | Badger</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-badger.css"><meta name="description" content="Component based framework and utility modules"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Badger"><meta property="twitter:description" content="Component based framework and utility modules"></head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.svg" style="width:34px;"></a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/abw/badger-js"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/introduction.html"><a href="manual/introduction.html" data-ice="link">Introduction</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/introduction.html"><a href="manual/introduction.html#warning" data-ice="link">Warning</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/filesystem.html"><a href="manual/filesystem.html" data-ice="link">Filesystem Utilities</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/filesystem.html"><a href="manual/filesystem.html#directories" data-ice="link">Directories</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/filesystem.html"><a href="manual/filesystem.html#reading-files" data-ice="link">Reading Files</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/filesystem.html"><a href="manual/filesystem.html#writing-files" data-ice="link">Writing Files</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/filesystem.html"><a href="manual/filesystem.html#directory-object" data-ice="link">Directory Object</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/filesystem.html"><a href="manual/filesystem.html#file-objects" data-ice="link">File Objects</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/codecs.html"><a href="manual/codecs.html" data-ice="link">Data Codecs</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/codecs.html"><a href="manual/codecs.html#read-data-files" data-ice="link">Read Data Files</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/codecs.html"><a href="manual/codecs.html#write-data-files" data-ice="link">Write Data Files</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/config_files.html"><a href="manual/config_files.html" data-ice="link">Configuration Files</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/config_files.html"><a href="manual/config_files.html#config-object" data-ice="link">Config Object</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/config_files.html"><a href="manual/config_files.html#config-directory" data-ice="link">Config Directory</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/config_files.html"><a href="manual/config_files.html#multiple-config-directories" data-ice="link">Multiple Config Directories</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/config_files.html"><a href="manual/config_files.html#loading-a-config-file" data-ice="link">Loading a Config File</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/config_files.html"><a href="manual/config_files.html#javascript-files" data-ice="link">Javascript Files</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/config_files.html"><a href="manual/config_files.html#yaml-or-json-files" data-ice="link">YAML or JSON Files</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/config_files.html"><a href="manual/config_files.html#data-path" data-ice="link">Data Path</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/config_files.html"><a href="manual/config_files.html#configuration-options" data-ice="link">Configuration Options</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/config_files.html"><a href="manual/config_files.html#benefits" data-ice="link">Benefits</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/library_modules.html"><a href="manual/library_modules.html" data-ice="link">Library Modules</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/library_modules.html"><a href="manual/library_modules.html#library-object" data-ice="link">Library Object</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/library_modules.html"><a href="manual/library_modules.html#library-directory" data-ice="link">Library Directory</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/library_modules.html"><a href="manual/library_modules.html#multiple-library-directories" data-ice="link">Multiple Library Directories</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/library_modules.html"><a href="manual/library_modules.html#loading-a-library-module" data-ice="link">Loading a Library Module</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/library_modules.html"><a href="manual/library_modules.html#data-path" data-ice="link">Data Path</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/library_modules.html"><a href="manual/library_modules.html#configuration-options" data-ice="link">Configuration Options</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/data_paths.html"><a href="manual/data_paths.html" data-ice="link">Data Paths</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/data_paths.html"><a href="manual/data_paths.html#config-files" data-ice="link">Config Files</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/data_paths.html"><a href="manual/data_paths.html#optional-items" data-ice="link">Optional Items</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/data_paths.html"><a href="manual/data_paths.html#quoted-path-segments" data-ice="link">Quoted Path Segments</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/data_paths.html"><a href="manual/data_paths.html#javascript-library-exports" data-ice="link">Javascript Library Exports</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/data_paths.html"><a href="manual/data_paths.html#navigating-your-own-data" data-ice="link">Navigating Your Own Data</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown" data-ice="content"><h1 id="configuration-files">Configuration Files</h1><p>We all know (hopefully) that it's considered harmful to hard-code values in code
that might conceivably change at some point.  Furthermore, the DRY (Don't
Repeat Yourself) principle tells us that <em>"Every piece of knowledge must
have a single, unambiguous, authoritative representation within a system"</em>.</p>
<p>So it's good practice to have a single location where configuration options for your
project can be stored.  For a smaller projects this might be a single configuration
file (e.g. consider how <code>package.json</code> is used for NPM modules). For larger projects
you may choose to have several configuration files to achieve a better separation
of concerns and to make them easier to manage.</p>
<ul>
<li><a href="#config-object">Config Object</a></li>
<li><a href="#config-directory">Config Directory</a></li>
<li><a href="#multiple-config-directories">Multiple Config Directories</a></li>
<li><a href="#loading-a-config-file">Loading a Config File</a></li>
<li><a href="#data-path">Data Path</a></li>
<li><a href="#configuration-options">Configuration Options</a></li>
<li><a href="#benefits">Benefits</a></li>
</ul>
<h2 id="config-object">Config Object</h2><p>The <a href="../class/src/Badger/Config.js~Config">Config</a> module simplifies the process
of reading configuration files stored in a central location.  Tell it where your
configuration files are stored and then it will take care of loading them for you.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">import { Config } from '@abw/badger'

// look for config files in a `config` directory
const configDir = new Config('config')

// load the badger.(js|mjs|yaml|json) file
configDir.config('badger').then(
  config =&gt; console.log("loading the badger config: ", config)
)</code></code></pre>
<h2 id="config-directory">Config Directory</h2><p>When you create a new <code>Config</code> object you should specify the name of the
configuration directory relative to your current location.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const configDir = new Config('config')</code></code></pre>
<p>You can specify it as a string as shown above, or using a
<a href="../class/src/Badger/Filesystem/Directory.js~Directory">Directory</a> object as
shown in the earlier examples. For example, if you have a script in the <code>bin</code>
directory and you want to load configuration files from the <code>config</code> directory
located alongside it then you can do something like this:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">import { bin, Config } from '@abw/badger'

const configDir = new Config(
  bin(import.meta.url).parent().dir('config')
)</code></code></pre>
<p>Or more succinctly like this:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">import { bin, Config } from '@abw/badger'

const configDir = new Config(
  bin(import.meta.url).dir('../config')
)</code></code></pre>
<h2 id="multiple-config-directories">Multiple Config Directories</h2><p>If you have multiple locations that you want to read configuration files
from then you can specify them as an array.  The values of the array can be
either Directory objects or strings, or a mixture of the two.  For example if
you want to read configuration files from your project root directory and/or a
<code>config</code> directory then you could do this:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const rootDir = bin(import.meta.url).parent()

const configDir = new Config(
  [rootDir, rootDir.dir('config')]
)</code></code></pre>
<h2 id="loading-a-config-file">Loading a Config File</h2><p>The <code>config()</code> method expects the basename (i.e. no file extension) of a file
in your config directory (or one of them).</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// load the badger.(js|mjs|yaml|json) file
configDir.config('badger').then(
  config =&gt; console.log("loaded the badger config: ", config)
)</code></code></pre>
<h3 id="javascript-files">Javascript Files</h3><p>It will first look for a Javascript file with a <code>.js</code> or <code>.mjs</code> extension.
If it finds such a file then it will import it and return a Promise that
fulfills with the exports from that file.  For example, a <code>config/badger.js</code>
file might look like this:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">export const name="Brian";
export const animal="Badger";</code></code></pre>
<h3 id="yaml-or-json-files">YAML or JSON Files</h3><p>If it doesn't find a Javascript file then it will look for a <code>yaml</code> or <code>json</code>
file.  For example, a <code>config/badger.yaml</code> might look like this:</p>
<pre><code class="lang-yaml"><code class="source-code prettyprint">name:   Brian
animal: Badger</code></code></pre>
<p>Or a <code>config/badger.json</code> might look like this:</p>
<pre><code class="lang-json"><code class="source-code prettyprint">{
  "name":   "Brian",
  "animal": "Badger"
}</code></code></pre>
<p>In all the above cases, the same data will be returned in the Promise.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">configDir.config('badger').then(
  // prints "Brian is a Badger"
  config =&gt; console.log(config.name, "is a", config.animal)
)</code></code></pre>
<h2 id="data-path">Data Path</h2><p>If you want to access a particular piece of data from the loaded configuration
then you can specify it as a data path fragment following the file name.  Separate the
file name and data path fragment with a <code>#</code>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// load the default export from the badger.(js|mjs) file
configDir.config('badger#name').then(
  name =&gt; console.log("The badger is called", name)
)</code></code></pre>
<p>See the <a href="./manual/data_paths">Data Paths</a> documentation for further information.</p>
<h2 id="configuration-options">Configuration Options</h2><p>The <code>jsExt</code> configuration option can be used to change the file extensions
that are recognised for Javascript files (<code>['js', 'mjs']</code> by default) and
the <code>codec</code> option can be used to specify which codecs can be used for
data files (<code>['yaml', 'json']</code> by default).  Note that the names of the
<code>codec</code> correspond to the file extensions, e.g. a file must have a <code>.yaml</code>
extension to be reconised and read using the <code>yaml</code> codec.</p>
<p>For example, if you only want to look for <code>.js</code> Javascript files and <code>.json</code>
data files then you would set the options like this:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const configDir = new Config(
  rootDir.dir('config'),
  {
    jsExt: ['js'],
    codec: ['json'],
  };
)</code></code></pre>
<p>Or, given that you now only have one value for each of <code>jsExt</code> and <code>codecs</code> you
could do it like this:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const configDir = new Config(
  rootDir.dir('config'),
  {
    jsExt: 'js',
    codec: 'json',
  };
)</code></code></pre>
<h2 id="benefits">Benefits</h2><p>In case it's not immediately obvious, one key benefit of using the Config module to
load configuration files is that it allows you to change the format that you're
using at any time.  You might start off with a simple <code>.json</code> JSON file then later decide
that you want to change to a <code>.yaml</code> YAML file so that you can add some comments and whitespace
to make it more readable.  Further down the line you might need to perform some
computation and switch it to a <code>.js</code> Javascript file.</p>
<p>Of course you still need to re-write your configuration file but you don't need to worry about
updating any code that's loading it.  When you add a <code>badger.yaml</code> file to the configuration
directory it will immediately take precedence over the <code>badger.json</code> file, or if you add a
<code>badger.js</code> file it will take precedence over both the <code>badger.yaml</code> and <code>badger.json</code> files.</p>
<p>This is why you should <strong>NOT</strong> provide the file extension in the name you pass to the
<code>config()</code> method.  Leave it up to the <code>config()</code> method to work that out for you
and do the right thing.</p>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>


</body></html>